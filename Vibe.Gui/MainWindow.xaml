<Window x:Class="Vibe.Gui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
        Title="Vibe Decompiler" Height="450" Width="800" Background="#FFFFFF" Icon="{StaticResource AppIconImage}"
        AllowDrop="True" PreviewKeyDown="Window_PreviewKeyDown"
        DragOver="Window_DragOver" Drop="Window_Drop">
    <Window.Resources>
        <SolidColorBrush x:Key="AccentBrush" Color="#C6DC1D" />
        <SolidColorBrush x:Key="PanelBrush" Color="#EEEEEE" />
        <SolidColorBrush x:Key="TextBrush" Color="#2D4D78" />
    </Window.Resources>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Header="_Open..." Click="OpenDll_Click" />
                <MenuItem Header="Recent _Files" x:Name="RecentFilesMenu" IsEnabled="False" />
                <Separator />
                <MenuItem Header="E_xit" Click="Exit_Click" />
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="_About" Click="About_Click" />
            </MenuItem>
        </Menu>
        <ProgressBar x:Name="BusyBar" DockPanel.Dock="Bottom" Height="4" IsIndeterminate="True" Visibility="Collapsed"/>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TreeView x:Name="DllTree" Grid.Column="0" Margin="4" Background="{StaticResource PanelBrush}" SelectedItemChanged="DllTree_SelectedItemChanged" KeyDown="DllTree_KeyDown" />
            <Grid Grid.Column="1" Margin="4">
                <avalonEdit:TextEditor x:Name="OutputBox" FontFamily="Consolas" IsReadOnly="True" ShowLineNumbers="True"
                                       VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Foreground="{StaticResource TextBrush}" Background="#FFFFFF" />
                <Grid x:Name="LoadingOverlay" Visibility="Collapsed" Background="#80FFFFFF">
                    <Canvas>
                        <Rectangle Width="200" Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Grid}}" Fill="{StaticResource AccentBrush}" Opacity="0.3">
                            <Rectangle.RenderTransform>
                                <TranslateTransform x:Name="LoadingTransform" />
                            </Rectangle.RenderTransform>
                        </Rectangle>
                        <Canvas.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="LoadingTransform" Storyboard.TargetProperty="X" From="-200" To="1000" Duration="0:0:3" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Canvas.Triggers>
                    </Canvas>
                    <TextBlock Text="Refining code..." FontSize="16" FontWeight="Bold" Foreground="{StaticResource TextBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
